<template>
  <div class="charts-wrap">
    <div
      class="charts"
      :id="props.id"
      :style="
        chartsWH && chartsWH.width
          ? { width: chartsWH.width + 'px', height: chartsWH.height + 'px' }
          : {}
      "
    ></div>
  </div>
</template>

<script setup>
// ---------------------- 时频图
import { nextTick, onMounted, inject, watch, getCurrentInstance, onBeforeUnmount } from 'vue'

const props = defineProps({
  id: {
    type: String
  },
  temporalData: {
    type: Object
  },
  // 渲染次数，控制每次进来初始化一次
  renderTimes: {
    type: Number,
    default: () => {
      return 1
    }
  },
  showTitle: {
    type: Boolean,
    default: () => {
      return true
    }
  },
  chartsWH: {
    type: Object,
    default: () => {}
  }
})
const { proxy } = getCurrentInstance()

watch(
  () => props.renderTimes,
  () => {
    nextTick(() => {
      init()
    })
  }
)

onMounted(() => {
  init()
})

// 绘制运动分析图
const Plotly = inject('Plotly')
const init = () => {
  Plotly.newPlot(
    props.id,
    [
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
          0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
        ],
        z: [
          0.0026749976744386912, 0.002861465102283447, 0.0027873192372467066, 0.002185142780256945,
          0.004619481520417564, 0.0033858476305848643, 0.002165112041358415, 0.0021422545230010844,
          0.002298638778262928, 0.0022380022603046257, 0.00240180403165171, 0.0024410467657770846,
          0.0020542359135833042, 0.0021515201040670467, 0.002024453775467299, 0.0019536804197424333,
          0.0019214599506966752, 0.001902712275340215, 0.0020563757914734047, 0.0022627914004445865,
          0.002193727187341019, 0.002412307539718095, 0.002319652327758224, 0.0018642997812411963,
          0.002011217819478231, 0.002074185102180991, 0.006005222375143478, 0.002312789847032854,
          0.0021625934040493213, 0.0022771948812803627, 0.0021945314875001496,
          0.0021979756802388045, 0.002597522506642508, 0.00236586858067778, 0.002060759843780455,
          0.00227412893135871, 0.002070861744376442, 0.0021380064608408924, 0.0023430695821057648,
          0.0023755978843105897, 0.0025564134142459084, 0.006831577716212982, 0.0025042338570008967,
          0.0022553082796297275, 0.002443702819168972, 0.0025665737884946775, 0.002313577068256125,
          0.0035653827408917696, 0.002727809813598977, 0.002668490693646554, 0.0025022213537334035,
          0.0023927191217050945, 0.002344800346374489, 0.0026184202177472146, 0.0023839217705281454,
          0.00292803931914564
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
          1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
        ],
        z: [
          0.0019961052795102715, 0.0021416097556233257, 0.002199992666187375, 0.0021166023597464015,
          0.002131685272309187, 0.0023323782484446836, 0.0021099218724821506, 0.0025328870822799374,
          0.002386650866221411, 0.002134071328326897, 0.0026029656384358897, 0.0024233205794094745,
          0.002153534719747213, 0.0021548608261238223, 0.004807626076609367, 0.002406790616288794,
          0.0019044740419844198, 0.0022076202964663298, 0.002139781397323389, 0.003439592952201518,
          0.001800352923144247, 0.002017490331664702, 0.0020424345849177506, 0.0021686988687478685,
          0.0020176921344506283, 0.002758843410990822, 0.0027571226634605346, 0.002290557302112248,
          0.0026429876460270746, 0.002240013416740854, 0.0024256302822761398, 0.002105506585993766,
          0.0021511009430312013, 0.002393743977256175, 0.0022685322740789195, 0.002529219928785843,
          0.0024492700733483937, 0.002198842684087051, 0.0025642086393103357, 0.002773137738752043,
          0.0034024478307712242, 0.0027586610096941985, 0.002993388727395725, 0.0030136893291113453,
          0.0023198403477026493, 0.0025734334955464996, 0.0024511230892439884, 0.002428624344476676,
          0.002313949435764698, 0.0023669723470504484, 0.0024255246443764963, 0.0025488431030654102,
          0.0025979892989256227, 0.0024587746228060233, 0.0032972367605203345, 0.002782754075766726
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
          2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2
        ],
        z: [
          0.002179028994257064, 0.0024605890704484674, 0.002095627689974178, 0.006527695598506658,
          0.004096252644450555, 0.002455340014687711, 0.002239113011075523, 0.0024313224045798246,
          0.0023070650593964635, 0.002228658238942595, 0.0023136283460673595, 0.0024527810487296815,
          0.0024102870738877758, 0.002224782779386401, 0.0022605685635508693, 0.002337316250449163,
          0.0024235290733308377, 0.002233301047204723, 0.0022113666238865854, 0.0021736984229070292,
          0.0020626659997340594, 0.002218890206042823, 0.002251875053774638, 0.0030058050629759824,
          0.0027482372388990314, 0.0024756494848415258, 0.0022839750488838676,
          0.0022086318476052134, 0.002235350939706886, 0.0025512362928163095, 0.002460069883421374,
          0.002034690801598552, 0.00264420224087018, 0.002361600592977139, 0.002356031964516678,
          0.002286492176527264, 0.0023097037468511445, 0.0022010353187083384, 0.0021546661931855426,
          0.002288021322400204, 0.0030128156239020306, 0.005868852878583625, 0.0022529907319101114,
          0.002432899184975047, 0.0021849392669990807, 0.0023015918110951363, 0.00286587676598947,
          0.002351896278415597, 0.001858822634514507, 0.0020230575698756094, 0.002302408700163059,
          0.0021865581603547194, 0.0019750029285199255, 0.0024482771718113638, 0.002248080785028781,
          0.0026633514775943755
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
          3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3
        ],
        z: [
          0.0018781073796056548, 0.0018781934487093674, 0.0018175323668470295,
          0.0020935193835553744, 0.0021803371811413364, 0.002425107305768907, 0.003089040499917362,
          0.0028681270896224326, 0.0023875126428790005, 0.002198915189610479, 0.001978654837549278,
          0.0023889881550548265, 0.004773014216838343, 0.002414549888769651, 0.004895350632858548,
          0.0025817160689847562, 0.0023819924978886174, 0.0023159312544158844, 0.002294224417198808,
          0.00222789820767584, 0.0023808180783414993, 0.002189543237368056, 0.002505638464727064,
          0.0023717230303804933, 0.0021066849316699115, 0.0020084356747281165,
          0.0021509298670638363, 0.002392381937318693, 0.002132548757919186, 0.0023761536044645355,
          0.002111728997981878, 0.002319485801217188, 0.002623159870861924, 0.0022647351840388544,
          0.0024636857802698355, 0.0023634568303769732, 0.0032020871623875645, 0.002263623136445051,
          0.004874319867319987, 0.0021940752513485455, 0.002422213623542062, 0.002335350885515583,
          0.0020538441879623857, 0.0022738341061919413, 0.0025054492358674045, 0.002223992273140645,
          0.0019449609858629869, 0.002188522966497331, 0.0022747869712295443, 0.002189824873224003,
          0.002593221801024178, 0.0022829005391935583, 0.0020203489888248626, 0.0025240616371378366,
          0.0026534581992246294, 0.0022658377713182134
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
          4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4
        ],
        z: [
          0.0033347314861715814, 0.0026468143296637754, 0.0023173280159806643, 0.00211219968858502,
          0.00204340638509867, 0.001991046147357541, 0.002040258154809527, 0.0024710140296711047,
          0.0019193096053744545, 0.001873598592243808, 0.0019277027840182565, 0.002062073633655885,
          0.0021335179574168816, 0.002027613061456098, 0.0019377607326589688, 0.002221287183260834,
          0.001947241007480574, 0.0020808849834284384, 0.0021342229264006817, 0.0024664549491554785,
          0.004519423524935314, 0.0021969220889658356, 0.0022399529965684466, 0.002053261516218509,
          0.0022750543036908965, 0.0021829835142515913, 0.0020471314307279865,
          0.0023041093892816446, 0.0030692529974236725, 0.002092352652380259, 0.0021481646168044675,
          0.0021484866318461373, 0.0021061465961179342, 0.0022038942528240842, 0.002014933692413534,
          0.0020023174555480827, 0.00206294649017175, 0.0034148966735624195, 0.002228314001372015,
          0.0018964739688678966, 0.00238803466462829, 0.0022307246601953584, 0.002371710136143336,
          0.002258867791703566, 0.002173249192786892, 0.0021558993514456557, 0.002142094992786701,
          0.0023710009303622784, 0.002062809496510459, 0.0022678679320253686, 0.002254770496499858,
          0.0020691546671651687, 0.0021022733741937675, 0.0020763972096748667,
          0.0025768451201027233, 0.010146836311680327
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
          5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5
        ],
        z: [
          0.003034413671946739, 0.00244699698312064, 0.002344701975402564, 0.0020759794699001972,
          0.002374295574343271, 0.005486592778138661, 0.0021933345918443044, 0.0023108849812375014,
          0.0022070834623103635, 0.0022775150440187708, 0.0025046944770824933, 0.002601223135434877,
          0.0026161919039538067, 0.003147333762789902, 0.004699187576172325, 0.0025487882136967744,
          0.0027338524860704445, 0.002582530365440267, 0.002167138694273943, 0.0024904906938291423,
          0.002303628628123948, 0.0021934549948431593, 0.0019965801667034427, 0.0019926210305942333,
          0.0022466282265565813, 0.0021222222630285868, 0.0023198410072558856, 0.002195390945445913,
          0.002525013229503216, 0.0025320515231037812, 0.0024133928871764173, 0.002215785669600969,
          0.002257793714867428, 0.003216205920749439, 0.0021247523651634808, 0.0023205167448587445,
          0.003373135088675959, 0.0025558816217451687, 0.0022299406512972008, 0.0020709002084648345,
          0.002344886810802538, 0.002311601794096163, 0.002201775437274277, 0.0022924408618432953,
          0.0024771934968170523, 0.0019038825778008592, 0.0021710116996247813,
          0.0022102383515005177, 0.0024535162574666233, 0.0022218542386846013,
          0.0024366330937797094, 0.0027997457037268057, 0.002466327777769917, 0.002786552709216159,
          0.002849154049113797, 0.0025255869237194536
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
          6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6
        ],
        z: [
          0.0024321507646751783, 0.002189024140619894, 0.0026307439079369024, 0.0021799950876357412,
          0.0022060437598111792, 0.002325276472235036, 0.003359696648293425, 0.002110749861585822,
          0.0023257161817083144, 0.0025391086360303633, 0.0022800920050587217,
          0.0021976974215588314, 0.0019277138008627467, 0.0031447460222906462, 0.002596451358733892,
          0.0022302880219179123, 0.0023812563306806925, 0.0023463451933137596,
          0.0022048955241451905, 0.0021528869388679718, 0.0024581067880366965, 0.002412649125766114,
          0.0024550171618953507, 0.0027779897175431367, 0.0026748755710431127,
          0.0025941443317161936, 0.0036407276656259557, 0.004123048909289529, 0.0033117311383861698,
          0.00320909864971168, 0.002792798905727647, 0.0032708068419817844, 0.0027213215998584867,
          0.0027455480358859656, 0.002382692503069539, 0.002810010151282571, 0.002605999296548498,
          0.0029124579107727947, 0.002256882222749472, 0.002180345867749375, 0.0022852490075625483,
          0.00263695028801712, 0.0025676396280197296, 0.002284841105377606, 0.002655013795099041,
          0.0024410401065940914, 0.002505008736112574, 0.002439771696494997, 0.0030578759489100797,
          0.002913904864620724, 0.002349755918454671, 0.002263557953044699, 0.0021890499179275567,
          0.0026162395192171873, 0.0022998796501116914, 0.010982119261896855
        ],
        type: 'scatter3d'
      },
      {
        mode: 'lines',
        x: [
          0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
          25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46,
          47, 48, 49, 50, 51, 52, 53, 54, 55
        ],
        y: [
          7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
          7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7
        ],
        z: [
          0.0021964013903851376, 0.0023032515810359018, 0.002286914587981467, 0.0033599027643568856,
          0.0033412003378935585, 0.0020234148159388532, 0.003278940304839525, 0.0019849589049449868,
          0.002160498124847632, 0.0023409564587239234, 0.0024292436147013573, 0.002648321513987721,
          0.002793589737505697, 0.0027883922046557067, 0.006713639165571779, 0.004706800256849943,
          0.002582770274504099, 0.0027558144403115347, 0.0024553801415913056, 0.0020608150647043596,
          0.0021215051341452362, 0.001989600133324819, 0.0018985117045729318, 0.0021471408828858595,
          0.002354738250653854, 0.0021002145469091707, 0.0021201339179987393, 0.002023727090610303,
          0.002163610315155421, 0.0021442768938185904, 0.0021614013743437915, 0.0022785362481086333,
          0.0020853681332959817, 0.0021941546346510863, 0.0024480410407656176,
          0.0036316233370050893, 0.002297396381870066, 0.0017796390796285641, 0.0022642009782944416,
          0.002079393294147223, 0.0019580130654406323, 0.0021918068175377768, 0.0022793936437533885,
          0.0024130983011539835, 0.00592519112242752, 0.0020233235154937293, 0.0021465501442192564,
          0.002446722003690686, 0.0021739328732045316, 0.0020254444924177523, 0.0021637852649864326,
          0.0020869898276744936, 0.002433174255667855, 0.0026428823115736597, 0.002560811665198156,
          0.0022981057164179653
        ],
        type: 'scatter3d'
      }
    ],
    {
      template: {
        data: {
          histogram2dcontour: [
            {
              type: 'histogram2dcontour',
              colorbar: { outlinewidth: 0, ticks: '' },
              colorscale: [
                [0.0, '#0d0887'],
                [0.1111111111111111, '#46039f'],
                [0.2222222222222222, '#7201a8'],
                [0.3333333333333333, '#9c179e'],
                [0.4444444444444444, '#bd3786'],
                [0.5555555555555556, '#d8576b'],
                [0.6666666666666666, '#ed7953'],
                [0.7777777777777778, '#fb9f3a'],
                [0.8888888888888888, '#fdca26'],
                [1.0, '#f0f921']
              ]
            }
          ],
          choropleth: [{ type: 'choropleth', colorbar: { outlinewidth: 0, ticks: '' } }],
          histogram2d: [
            {
              type: 'histogram2d',
              colorbar: { outlinewidth: 0, ticks: '' },
              colorscale: [
                [0.0, '#0d0887'],
                [0.1111111111111111, '#46039f'],
                [0.2222222222222222, '#7201a8'],
                [0.3333333333333333, '#9c179e'],
                [0.4444444444444444, '#bd3786'],
                [0.5555555555555556, '#d8576b'],
                [0.6666666666666666, '#ed7953'],
                [0.7777777777777778, '#fb9f3a'],
                [0.8888888888888888, '#fdca26'],
                [1.0, '#f0f921']
              ]
            }
          ],
          heatmap: [
            {
              type: 'heatmap',
              colorbar: { outlinewidth: 0, ticks: '' },
              colorscale: [
                [0.0, '#0d0887'],
                [0.1111111111111111, '#46039f'],
                [0.2222222222222222, '#7201a8'],
                [0.3333333333333333, '#9c179e'],
                [0.4444444444444444, '#bd3786'],
                [0.5555555555555556, '#d8576b'],
                [0.6666666666666666, '#ed7953'],
                [0.7777777777777778, '#fb9f3a'],
                [0.8888888888888888, '#fdca26'],
                [1.0, '#f0f921']
              ]
            }
          ],
          heatmapgl: [
            {
              type: 'heatmapgl',
              colorbar: { outlinewidth: 0, ticks: '' },
              colorscale: [
                [0.0, '#0d0887'],
                [0.1111111111111111, '#46039f'],
                [0.2222222222222222, '#7201a8'],
                [0.3333333333333333, '#9c179e'],
                [0.4444444444444444, '#bd3786'],
                [0.5555555555555556, '#d8576b'],
                [0.6666666666666666, '#ed7953'],
                [0.7777777777777778, '#fb9f3a'],
                [0.8888888888888888, '#fdca26'],
                [1.0, '#f0f921']
              ]
            }
          ],
          contourcarpet: [{ type: 'contourcarpet', colorbar: { outlinewidth: 0, ticks: '' } }],
          contour: [
            {
              type: 'contour',
              colorbar: { outlinewidth: 0, ticks: '' },
              colorscale: [
                [0.0, '#0d0887'],
                [0.1111111111111111, '#46039f'],
                [0.2222222222222222, '#7201a8'],
                [0.3333333333333333, '#9c179e'],
                [0.4444444444444444, '#bd3786'],
                [0.5555555555555556, '#d8576b'],
                [0.6666666666666666, '#ed7953'],
                [0.7777777777777778, '#fb9f3a'],
                [0.8888888888888888, '#fdca26'],
                [1.0, '#f0f921']
              ]
            }
          ],
          surface: [
            {
              type: 'surface',
              colorbar: { outlinewidth: 0, ticks: '' },
              colorscale: [
                [0.0, '#0d0887'],
                [0.1111111111111111, '#46039f'],
                [0.2222222222222222, '#7201a8'],
                [0.3333333333333333, '#9c179e'],
                [0.4444444444444444, '#bd3786'],
                [0.5555555555555556, '#d8576b'],
                [0.6666666666666666, '#ed7953'],
                [0.7777777777777778, '#fb9f3a'],
                [0.8888888888888888, '#fdca26'],
                [1.0, '#f0f921']
              ]
            }
          ],
          mesh3d: [{ type: 'mesh3d', colorbar: { outlinewidth: 0, ticks: '' } }],
          scatter: [
            { fillpattern: { fillmode: 'overlay', size: 10, solidity: 0.2 }, type: 'scatter' }
          ],
          parcoords: [{ type: 'parcoords', line: { colorbar: { outlinewidth: 0, ticks: '' } } }],
          scatterpolargl: [
            { type: 'scatterpolargl', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }
          ],
          bar: [
            {
              error_x: { color: '#2a3f5f' },
              error_y: { color: '#2a3f5f' },
              marker: {
                line: { color: '#E5ECF6', width: 0.5 },
                pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 }
              },
              type: 'bar'
            }
          ],
          scattergeo: [
            { type: 'scattergeo', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }
          ],
          scatterpolar: [
            { type: 'scatterpolar', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }
          ],
          histogram: [
            {
              marker: { pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 } },
              type: 'histogram'
            }
          ],
          scattergl: [{ type: 'scattergl', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }],
          scatter3d: [
            {
              type: 'scatter3d',
              line: { colorbar: { outlinewidth: 0, ticks: '' } },
              marker: { colorbar: { outlinewidth: 0, ticks: '' } }
            }
          ],
          scattermapbox: [
            { type: 'scattermapbox', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }
          ],
          scatterternary: [
            { type: 'scatterternary', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }
          ],
          scattercarpet: [
            { type: 'scattercarpet', marker: { colorbar: { outlinewidth: 0, ticks: '' } } }
          ],
          carpet: [
            {
              aaxis: {
                endlinecolor: '#2a3f5f',
                gridcolor: 'white',
                linecolor: 'white',
                minorgridcolor: 'white',
                startlinecolor: '#2a3f5f'
              },
              baxis: {
                endlinecolor: '#2a3f5f',
                gridcolor: 'white',
                linecolor: 'white',
                minorgridcolor: 'white',
                startlinecolor: '#2a3f5f'
              },
              type: 'carpet'
            }
          ],
          table: [
            {
              cells: { fill: { color: '#EBF0F8' }, line: { color: 'white' } },
              header: { fill: { color: '#C8D4E3' }, line: { color: 'white' } },
              type: 'table'
            }
          ],
          barpolar: [
            {
              marker: {
                line: { color: '#E5ECF6', width: 0.5 },
                pattern: { fillmode: 'overlay', size: 10, solidity: 0.2 }
              },
              type: 'barpolar'
            }
          ],
          pie: [{ automargin: true, type: 'pie' }]
        },
        layout: {
          autotypenumbers: 'strict',
          colorway: [
            '#636efa',
            '#EF553B',
            '#00cc96',
            '#ab63fa',
            '#FFA15A',
            '#19d3f3',
            '#FF6692',
            '#B6E880',
            '#FF97FF',
            '#FECB52'
          ],
          font: { color: '#ffffff' },
          hovermode: 'closest',
          hoverlabel: { align: 'left' },
          paper_bgcolor: '#3B3D4C',
          plot_bgcolor: '#E5ECF6',
          polar: {
            bgcolor: '#E5ECF6',
            angularaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
            radialaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' }
          },
          ternary: {
            bgcolor: '#E5ECF6',
            aaxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
            baxis: { gridcolor: 'white', linecolor: 'white', ticks: '' },
            caxis: { gridcolor: 'white', linecolor: 'white', ticks: '' }
          },
          coloraxis: { colorbar: { outlinewidth: 0, ticks: '' } },
          colorscale: {
            sequential: [
              [0.0, '#0d0887'],
              [0.1111111111111111, '#46039f'],
              [0.2222222222222222, '#7201a8'],
              [0.3333333333333333, '#9c179e'],
              [0.4444444444444444, '#bd3786'],
              [0.5555555555555556, '#d8576b'],
              [0.6666666666666666, '#ed7953'],
              [0.7777777777777778, '#fb9f3a'],
              [0.8888888888888888, '#fdca26'],
              [1.0, '#f0f921']
            ],
            sequentialminus: [
              [0.0, '#0d0887'],
              [0.1111111111111111, '#46039f'],
              [0.2222222222222222, '#7201a8'],
              [0.3333333333333333, '#9c179e'],
              [0.4444444444444444, '#bd3786'],
              [0.5555555555555556, '#d8576b'],
              [0.6666666666666666, '#ed7953'],
              [0.7777777777777778, '#fb9f3a'],
              [0.8888888888888888, '#fdca26'],
              [1.0, '#f0f921']
            ],
            diverging: [
              [0, '#8e0152'],
              [0.1, '#c51b7d'],
              [0.2, '#de77ae'],
              [0.3, '#f1b6da'],
              [0.4, '#fde0ef'],
              [0.5, '#f7f7f7'],
              [0.6, '#e6f5d0'],
              [0.7, '#b8e186'],
              [0.8, '#7fbc41'],
              [0.9, '#4d9221'],
              [1, '#276419']
            ]
          },
          xaxis: {
            gridcolor: 'white',
            linecolor: 'white',
            ticks: '',
            title: { standoff: 15 },
            zerolinecolor: 'white',
            automargin: true,
            zerolinewidth: 2
          },
          yaxis: {
            gridcolor: 'white',
            linecolor: 'white',
            ticks: '',
            title: { standoff: 15 },
            zerolinecolor: 'white',
            automargin: true,
            zerolinewidth: 2
          },
          scene: {
            xaxis: {
              backgroundcolor: '#484a5a',
              gridcolor: 'white',
              linecolor: 'white',
              showbackground: true,
              ticks: '',
              zerolinecolor: 'white',
              gridwidth: 2
            },
            yaxis: {
              backgroundcolor: '#484a5a',
              gridcolor: 'white',
              linecolor: 'white',
              showbackground: true,
              ticks: '',
              zerolinecolor: 'white',
              gridwidth: 2
            },
            zaxis: {
              backgroundcolor: '#484a5a',
              gridcolor: 'white',
              linecolor: 'white',
              showbackground: true,
              ticks: '',
              zerolinecolor: 'white',
              gridwidth: 2
            }
          },
          shapedefaults: { line: { color: '#2a3f5f' } },
          annotationdefaults: { arrowcolor: '#2a3f5f', arrowhead: 0, arrowwidth: 1 },
          geo: {
            bgcolor: 'white',
            landcolor: '#E5ECF6',
            subunitcolor: 'white',
            showland: true,
            showlakes: true,
            lakecolor: 'white'
          },
          title: { x: 0.05 },
          mapbox: { style: 'light' }
        }
      },
      margin: { l: 0, r: 0, b: 0, t: 0 },
      scene: {
        xaxis: { title: { text: '\u68c0\u6d4b\u6b21\u6570' } },
        yaxis: { title: { text: '\u5f80\u8fd4' } },
        zaxis: { title: { text: '\u6307\u6807\u503c' } }
      }
    },
    { responsive: true }
  )
}
onBeforeUnmount(() => {
  Plotly.purge(props.id)
  proxy.$globalTemporalData = null // 时频
})
</script>

<style scoped lang="scss">
.charts-wrap {
  height: 100%;
  width: 100%;

  .charts {
    height: 100%;
    width: 100%;
  }
}
</style>
